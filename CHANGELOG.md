# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Added
- **共有モーダル**: ヘッダー右上に「Share」ボタンを追加し、クリックでURLを表示するモーダルポップアップを実装
  - 画面スペースを節約し、モバイルでの使いやすさを向上
- **アイテム編集機能**: アイテムをタップして名前とタグを編集可能に
  - モーダルダイアログで編集UI表示
  - 既存アイテムへのタグ追加・変更が簡単に
- **タグ機能**: アイテムにタグを付けて分類・フィルタリング可能に
  - プリセットタグ7種類（Woolies、Coles、ALDI、IGA、Asian Grocery、Chemist、Kmart）
  - カスタムタグ追加機能（「+」ボタンから追加可能）
  - タグごとに固定色のカラーバッジ表示（カスタムタグはグレー）
  - タグフィルタリング機能（チェック状態フィルタとAND条件で併用可能）
  - カスタムタグはlocalStorageに保存され、次回アクセス時も利用可能
  - 各アイテムは1タグまで設定可能（配列形式で拡張性を確保）
- **自動更新機能（ポーリング）**: 7秒間隔で自動的にサーバーからデータを取得し、他のユーザーの変更をリアルタイムで反映
  - 差分検知により不要な再描画を防止
  - 保存中はポーリングをスキップして競合を回避
  - ネットワークエラー時は自動リトライ
  - 同期中の視覚的インジケーター（緑の点滅）を表示
- **モバイル最適化UI**:
  - チェックボックスを右側に配置（片手操作で親指でタップしやすい）
  - 下部固定の入力バー（スクロールせずにすぐアクセス可能）
  - タップ領域を拡大（最小44px高さ）
  - 長いテキストの自動折り返し対応
  - レスポンシブデザイン（モバイル・タブレット・デスクトップ対応）
  - iOS向けフォントサイズ16px（ズーム防止）
  - セーフエリア対応（iPhone等のホームインジケーターと重ならない）
  - 入力バーのレスポンシブ最適化（タグ選択幅を100pxに縮小、ボタンサイズ調整、box-sizingで横スクロール防止）
- ヘッダーをsticky化（スクロールしても共有URLとフィルターが常に表示）
- アクセシビリティ向上（aria-label追加、キーボード操作対応）

### Changed
- **タイトル変更**: アプリ名を「Shopping」から「Shopping List」に変更
- **フィルターUI最適化**: フィルターセクションを1行レイアウトに変更（チェック状態フィルタとタグフィルタを同じ行に表示）
- **入力UIの最適化**: タグ選択を1行にコンパクトに配置（アイテム入力、タグ選択、+ボタン、追加ボタンを同じ行に）
- **アイテムタップ動作**: アイテム全体をタップするとチェックではなく編集モーダルが開くように変更
- **チェック操作**: チェックボックスをタップした時のみチェックON/OFFするように変更
- **誤チェック対策**: 「すべて」表示時、チェック済みアイテムを最近チェックした順（新しい順）に表示
  - 誤ってチェックしたアイテムが一番上に表示されるため、すぐに見つけて解除可能
- UIレイアウトを全面的にモバイルファーストで再設計
- アイテムの最小高さを60pxに拡大（タップしやすさ向上）
- 入力フィールドとボタンの高さを48pxに統一
- 共有URLコピーボタンのラベルを「Copy」→「✓ Copied」に変更（コピー成功時）
- トースト通知の位置を下部入力バーと重ならないように調整
- チェックボックスのサイズを22pxに調整
- ローディング改善: 特売取得API呼び出し時に、取得中モーダルを追加（経過時間を表示） — APIが遅い場合でもユーザーにロード中であることを明示するよう改善
- ユーザーによるキャンセル: 特売情報取得のロード中に『キャンセル』ボタンを追加。Fetch を Abort して取得を中止できます。
- 削除ボタンを削除（チェックで自動的に非表示になるため不要）

### Fixed
- Enterキー押下時の意図しないフォーム送信を防止
- 楽観的UI更新により、保存中でも即座に画面が更新される
- タグフィルタ選択肢が動的に更新される（使用中のタグのみ表示）

## [0.2.0] - 2025-10-07

### Added
- ワンクリックURLコピー機能
- GitHub Actions CI/CD パイプライン（mainブランチへのpushで自動デプロイ）
- CICD_SETUP.md（CI/CD設定ガイド）

### Changed
- README.mdを全面的に刷新（デモリンク、バッジ、詳細な手順を追加）

## [0.1.0] - 2025-10-07

### Added
- 初回リリース
- Cloudflare Workers + KV バックエンド
- 静的HTML/CSS/JSフロントエンド
- トークンベースの共有機能（認証不要）
- 基本的なCRUD操作（追加、チェック、削除）
- フィルター機能（未チェックのみ/すべて）
- 自動ソート（未チェック優先）
- MIT ライセンス

[Unreleased]: https://github.com/HikaLucaM/groccery_list_app/compare/v0.2.0...HEAD
[0.2.0]: https://github.com/HikaLucaM/groccery_list_app/compare/v0.1.0...v0.2.0
[0.1.0]: https://github.com/HikaLucaM/groccery_list_app/releases/tag/v0.1.0
